"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getOBJSchema = getOBJSchema;
var _schema = require("@loaders.gl/schema");
function getOBJSchema(attributes) {
  var metadata = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var metadataMap;
  for (var key in metadata) {
    metadataMap = metadataMap || new Map();
    if (key !== 'value') {
      metadataMap.set(key, JSON.stringify(metadata[key]));
    }
  }
  var fields = [];
  for (var attributeName in attributes) {
    var attribute = attributes[attributeName];
    var field = getArrowFieldFromAttribute(attributeName, attribute);
    fields.push(field);
  }
  return new _schema.Schema(fields, metadataMap);
}
function getArrowFieldFromAttribute(attributeName, attribute) {
  var metadataMap = new Map();
  for (var key in attribute) {
    if (key !== 'value') {
      metadataMap.set(key, JSON.stringify(attribute[key]));
    }
  }
  var type = (0, _schema.getArrowTypeFromTypedArray)(attribute.value);
  var isSingleValue = !('size' in attribute) || attribute.size === 1;
  return isSingleValue ? new _schema.Field(attributeName, type, false, metadataMap) : new _schema.Field(attributeName, new _schema.FixedSizeList(attribute.size, new _schema.Field('value', type)), false, metadataMap);
}
//# sourceMappingURL=get-obj-schema.js.map